(function(){"use strict";var t={455:function(t,e,r){var a=r(9242),s=r(3396);function i(t,e,r,a,i,l){const o=(0,s.up)("HeaderBlock"),c=(0,s.up)("router-view"),n=(0,s.up)("FooterBlock");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(o),(0,s.Wm)(c),(0,s.Wm)(n)],64)}const l={class:"header container"},o={class:"header__wrapper"},c=(0,s._)("span",{class:"header__info"},"Каталог",-1),n=(0,s._)("a",{class:"header__logo",href:"#"},[(0,s._)("img",{src:"/img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"})],-1),d=(0,s._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1);function u(t,e,r,a,i,u){const _=(0,s.up)("HeaderCart");return(0,s.wg)(),(0,s.iD)("header",l,[(0,s._)("div",o,[c,n,d,(0,s.Wm)(_)])])}var _=r(7139);const m=(0,s._)("svg",{width:"19",height:"24"},[(0,s._)("use",{"xlink:href":"#icon-cart"})],-1),g={class:"header__count","aria-label":"Количество товаров"};function p(t,e,r,a,i,l){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.j4)(o,{to:{name:"cart"},class:"header__cart","aria-label":"Корзина с товарами"},{default:(0,s.w5)((()=>[m,(0,s._)("span",g,(0,_.zw)(l.cartProductsCount),1)])),_:1})}var h=r(65),f={name:"HeaderCart",methods:{...(0,h.Se)(["getCart"])},computed:{cartProductsCount(){return this.getCart().length}}},C=r(89);const y=(0,C.Z)(f,[["render",p]]);var b=y,k={name:"HeaderBlock",components:{HeaderCart:b}};const v=(0,C.Z)(k,[["render",u]]);var w=v;const P={class:"footer container"},I={class:"footer__wrapper"},M={class:"footer__links"},D=(0,s._)("a",{class:"footer__link",href:"#"}," Каталог ",-1),A=(0,s._)("li",null,[(0,s._)("a",{class:"footer__link",href:"tel:88006009009"}," 8 800 600 90 09 ")],-1),E=(0,s._)("li",null,[(0,s._)("a",{class:"footer__link",href:"mailto:hi@technozavrrr.com"}," hi@technozavrrr.com ")],-1),U=(0,s._)("li",null,[(0,s._)("a",{class:"footer__link",href:"#"}," Распродажа ")],-1),L=(0,s._)("li",null,[(0,s._)("a",{class:"footer__link footer__link--medium",href:"#"}," Заказать звонок ")],-1),T=(0,s.uE)('<ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Moire </span>',4);function z(t,e,r,a,i,l){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("footer",P,[(0,s._)("div",I,[(0,s._)("ul",M,[(0,s._)("li",null,[D,(0,s.Wm)(o,{to:{name:"catalog"},class:"footer__link"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Каталог ")])),_:1})]),A,E,U,L]),T])])}var S={name:"FooterBlock"};const $=(0,C.Z)(S,[["render",z]]);var F=$,x=(0,s.aZ)({components:{FooterBlock:F,HeaderBlock:w}});const K=(0,C.Z)(x,[["render",i]]);var O=K,Z=r(2483);const q=t=>((0,s.dD)("data-v-64e764d6"),t=t(),(0,s.Cn)(),t),H={class:"content container"},R={class:"content__top"},j={class:"content__row"},V=q((()=>(0,s._)("h1",{class:"content__title"}," Каталог ",-1))),W={class:"content__info"},Y={class:"content__catalog"},N={class:"catalog"},B={key:2,class:"content container fail-loading"};function G(t,e,r,a,i,l){const o=(0,s.up)("Filter"),c=(0,s.up)("Loader"),n=(0,s.up)("CatalogList"),d=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)("main",H,[(0,s._)("div",R,[(0,s._)("div",j,[V,(0,s._)("span",W,(0,_.zw)(l.totalItems)+" товара ",1)])]),(0,s._)("div",Y,[(0,s.Wm)(o,{"product-categories":l.productCategories,"product-materials":l.productMaterials,"product-collections":l.productCollections,"filter-materials":i.filterMaterial,"filter-category":i.filterCategory,"filter-collections":i.filterCollection,"show-reset":l.showReset,onReloadProductList:l.loadFilteredProducts},null,8,["product-categories","product-materials","product-collections","filter-materials","filter-category","filter-collections","show-reset","onReloadProductList"]),(0,s._)("section",N,[i.loadingProducts?((0,s.wg)(),(0,s.j4)(c,{key:0})):(0,s.kq)("",!0),i.loadingProducts||i.failLoadingProducts?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(n,{key:1,"loading-products":i.loadingProducts,products:i.products},null,8,["loading-products","products"])),!i.loadingProducts&&i.failLoadingProducts?((0,s.wg)(),(0,s.iD)("div",B," Не удалось загрузить данные заказа. ")):(0,s.kq)("",!0),(0,s.Wm)(d,{page:l.currentPage,pages:l.totalPages,total:l.totalItems,onChangePage:l.changePage},null,8,["page","pages","total","onChangePage"])])])])}r(6229),r(7330),r(2062);var J=r(4161);const Q={class:"filter"},X={class:"form__block"},tt=(0,s._)("legend",{class:"form__legend"},"Цена",-1),et={class:"form__label form__label--price"},rt=(0,s._)("span",{class:"form__value"},"От",-1),at={class:"form__label form__label--price"},st=(0,s._)("span",{class:"form__value"},"До",-1),it={class:"form__block"},lt=(0,s._)("legend",{class:"form__legend"},"Категория",-1),ot={class:"form__label form__label--select"},ct=(0,s._)("option",{value:"0"},"Все категории",-1),nt=["value"],dt={class:"form__block"},ut=(0,s._)("legend",{class:"form__legend"},"Материал",-1),_t={class:"check-list"},mt={class:"check-list__label"},gt=["value"],pt={class:"check-list__desc"},ht={class:"form__block"},ft=(0,s._)("legend",{class:"form__legend"},"Коллекция",-1),Ct={class:"check-list"},yt={class:"check-list__label"},bt=["value"],kt={class:"check-list__desc"},vt=(0,s._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1);function wt(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("aside",Q,[(0,s._)("form",{class:"filter__form form",action:"#",onSubmit:e[6]||(e[6]=(0,a.iM)(((...t)=>o.submitFilter&&o.submitFilter(...t)),["prevent"]))},[(0,s._)("fieldset",X,[tt,(0,s._)("label",et,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.selectMinPrice=t)},null,512),[[a.nr,l.selectMinPrice]]),rt]),(0,s._)("label",at,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.selectMaxPrice=t)},null,512),[[a.nr,l.selectMaxPrice]]),st])]),(0,s._)("fieldset",it,[lt,(0,s._)("label",ot,[(0,s.wy)((0,s._)("select",{class:"form__select",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>l.selectCategory=t)},[ct,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.categoryList,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,_.zw)(t.title),9,nt)))),128))],512),[[a.bM,l.selectCategory]])])]),(0,s._)("fieldset",dt,[ut,(0,s._)("ul",_t,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.materialsList,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:t.id},[(0,s._)("label",mt,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=t=>l.selectMaterials=t),value:t.id},null,8,gt),[[a.e8,l.selectMaterials]]),(0,s._)("span",pt,[(0,s.Uk)((0,_.zw)(t.title)+" ",1),(0,s._)("span",null,"("+(0,_.zw)(t.productsCount)+")",1)])])])))),128))])]),(0,s._)("fieldset",ht,[ft,(0,s._)("ul",Ct,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.collectionsList,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:t.id},[(0,s._)("label",yt,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=t=>l.selectCollections=t),value:t.id},null,8,bt),[[a.e8,l.selectCollections]]),(0,s._)("span",kt,[(0,s.Uk)((0,_.zw)(t.title)+" ",1),(0,s._)("span",null,"("+(0,_.zw)(t.productsCount)+")",1)])])])))),128))])]),vt,(0,s.wy)((0,s._)("button",{class:"filter__reset button button--second",type:"button",onClick:e[5]||(e[5]=(...t)=>o.resetFilter&&o.resetFilter(...t))}," Сбросить ",512),[[a.F8,o.displayResetButton]])],32)])}var Pt={name:"Filter",props:["productCategories","productMaterials","productCollections","filterCollections","filterCategory","filterMaterials","filterMaxPrice","filterMinPrice","showReset"],data(){return{selectCategory:0,selectMaterials:[],selectCollections:[],selectMaxPrice:0,selectMinPrice:0}},computed:{categoryList(){return this.productCategories},materialsList(){return this.productMaterials},collectionsList(){return this.productCollections},displayResetButton(){return this.showReset}},methods:{submitFilter(){this.$emit("reloadProductList",{filterCategory:this.selectCategory,filterMaterials:this.selectMaterials,filterCollection:this.selectCollections,filterMaxPrice:this.selectMaxPrice,filterMinPrice:this.selectMinPrice})},resetFilter(){this.selectCategory=0,this.selectMaterials=[],this.selectCollections=[],this.selectMaxPrice=0,this.selectMinPrice=0,this.submitFilter()}},emits:["reloadProductList","update:filterCategory","update:filterMaterials","update:filterCollections","update:filterMaxPrice","update:filterMinPrice"],created(){this.selectCategory=this.filterCategory,this.selectMaterials=this.filterMaterials,this.selectCollections=this.filterCollections,this.selectMaxPrice=this.filterMaxPrice,this.selectMinPrice=this.filterMinPrice}};const It=(0,C.Z)(Pt,[["render",wt]]);var Mt=It;const Dt={class:"catalog__list"};function At(t,e,r,i,l,o){const c=(0,s.up)("CatalogItem");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("ul",Dt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.productsList,(t=>((0,s.wg)(),(0,s.j4)(c,{product:t,key:t.id},null,8,["product"])))),128))],512)),[[a.F8,!o.isLoading&&!o.isEmptyProductsList]])}const Et={class:"catalog__item"},Ut=["src","alt"],Lt={class:"catalog__title"},Tt={href:"#"},zt={class:"catalog__price"},St={class:"colors colors--black"},$t={class:"colors__label"},Ft=["name","value","checked","onChange"];function xt(t,e,r,a,i,l){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("li",Et,[(0,s.Wm)(o,{to:{name:"product",params:{id:r.product.id}},class:"catalog__pic"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:l.productImage,alt:r.product.title},null,8,Ut)])),_:1},8,["to"]),(0,s._)("h3",Lt,[(0,s._)("a",Tt,(0,_.zw)(r.product.title),1)]),(0,s._)("span",zt,(0,_.zw)(r.product.price)+" ₽ ",1),(0,s._)("ul",St,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.product.colors,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:t.id},[(0,s._)("label",$t,[(0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:`color-${r.product.id}`,value:t.color.code,checked:t.color.code===l.productColor,onChange:e=>l.changeColor(t.id)},null,40,Ft),(0,s._)("span",{class:"colors__value",style:(0,_.j5)({"background-color":t.color.code})},null,4)])])))),128))])])}var Kt={name:"CatalogItem",props:["product"],data(){return{currentColor:null,currentImage:null}},methods:{changeColor(t){this.product.colors.forEach((e=>{e.id===t&&(this.currentColor=e.color.code,e.gallery?this.currentImage=e.gallery[0].file.url:this.currentImage="/img/svg/no-image.svg")}))}},computed:{productColor(){return this.currentColor??this.product.colors[0].color.code},productImage(){return this.currentImage?this.currentImage:this.product.colors[0].gallery&&this.product.colors[0].gallery[0].file.url?this.product.colors[0].gallery[0].file.url:"/img/svg/no-image.svg"}}};const Ot=(0,C.Z)(Kt,[["render",xt]]);var Zt=Ot,qt={name:"CatalogList",components:{CatalogItem:Zt},props:["products","loadingProducts"],computed:{isLoading(){return this.loadingProducts},isEmptyProductsList(){return 0===this.products.length},productsList(){return this.products}}};const Ht=(0,C.Z)(qt,[["render",At]]);var Rt=Ht;const jt={key:0,class:"catalog__pagination pagination"},Vt={class:"pagination__item"},Wt=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-left"})],-1),Yt=[Wt],Nt=["onClick"],Bt={class:"pagination__item"},Gt=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-right"})],-1),Jt=[Gt];function Qt(t,e,r,i,l,o){return this.isShowPagination?((0,s.wg)(),(0,s.iD)("ul",jt,[(0,s._)("li",Vt,[(0,s._)("a",{class:(0,_.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":o.isFirstPage}]),href:"#",onClick:e[0]||(e[0]=(0,a.iM)(((...t)=>o.prevPage&&o.prevPage(...t)),["prevent"])),"aria-label":"Предыдущая страница"},Yt,2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pagesList,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"pagination__item",key:t.page},[(0,s._)("a",{class:(0,_.C_)(["pagination__link",{"pagination__link--current":t.current}]),href:"#",onClick:e=>o.choosePage(t.page)},(0,_.zw)(t.page),11,Nt)])))),128)),(0,s._)("li",Bt,[(0,s._)("a",{class:(0,_.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":o.isLastPage}]),href:"#",onClick:e[1]||(e[1]=(0,a.iM)(((...t)=>o.nextPage&&o.nextPage(...t)),["prevent"])),"aria-label":"Следующая страница"},Jt,2)])])):(0,s.kq)("",!0)}r(7658);var Xt={name:"Pagination",props:["page","pages","total"],emits:["changePage"],methods:{prevPage(){this.currentPage>1&&this.$emit("changePage",this.page-1)},nextPage(){this.currentPage<this.totalPages&&this.$emit("changePage",this.page+1)},choosePage(t){this.$emit("changePage",t)}},computed:{currentPage(){return this.page},totalPages(){return this.pages},totalItems(){return this.total},isFirstPage(){return 1===this.currentPage},isLastPage(){return this.currentPage===this.totalPages},pagesList(){const t=[];for(let e=1;e<=this.totalPages;e++)t.push({page:e,current:this.currentPage===e});return t},isShowPagination(){return this.totalPages>1}}};const te=(0,C.Z)(Xt,[["render",Qt]]);var ee=te;const re={api:{base_url:"https://vue-moire.skillbox.cc"}},ae=t=>((0,s.dD)("data-v-43b9f736"),t=t(),(0,s.Cn)(),t),se={class:"content loader-block"},ie=ae((()=>(0,s._)("div",{class:"loader-content"},[(0,s._)("div",{class:"loader"})],-1))),le=[ie];function oe(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("div",se,le)}var ce={name:"Loader"};const ne=(0,C.Z)(ce,[["render",oe],["__scopeId","data-v-43b9f736"]]);var de=ne,ue={name:"Catalog",components:{Pagination:ee,CatalogList:Rt,Filter:Mt,Loader:de},data(){return{products:[],loadingProducts:!0,failLoadingProducts:!1,failLoadingProductError:"",filterMaxPrice:0,filterMinPrice:0,filterCategory:0,filterMaterial:[],filterCollection:[],page:1,pageLimit:12,pages:1,total:0}},props:["categoryId"],methods:{...(0,h.Se)(["getUserAccessKey","getProductCategories","getProductMaterials","getProductCollections","getFilterCategory"]),...(0,h.OI)(["setProductCategories","setProductMaterials","setProductCollections","setFilterCategory"]),loadProducts(){this.loadingProducts=!0;const t=`${re.api.base_url}/api/products/?${this.filterParams}`;J.Z.get(t).then((t=>{this.products=t.data.items,this.pages=t.data.pagination.pages,this.total=t.data.pagination.total,this.loadingProducts=!1})).catch((()=>{this.loadingProducts=!1,this.failLoadingProducts=!0,this.failLoadingProductError="Не удалось загрузить список товаров. Попробуйте немного позже..."}))},loadCategory(){if(this.getProductCategories.length>0)return;const t=`${re.api.base_url}/api/productCategories`;J.Z.get(t).then((t=>{this.setProductCategories(t.data.items)})).catch()},loadMaterial(){if(this.getProductMaterials().length>0)return;const t=`${re.api.base_url}/api/materials`;J.Z.get(t).then((t=>{this.setProductMaterials(t.data.items)})).catch()},loadCollection(){if(this.getProductCollections().length>0)return;const t=`${re.api.base_url}/api/seasons`;J.Z.get(t).then((t=>{this.setProductCollections(t.data.items)})).catch()},loadFilteredProducts(t){this.filterCategory=t.filterCategory,this.filterCollection=t.filterCollection,this.filterMaterial=t.filterMaterials,this.filterMaxPrice=t.filterMaxPrice,this.filterMinPrice=t.filterMinPrice,this.loadProducts()},changePage(t){this.page=t,this.loadProducts()}},computed:{showReset(){return 0!==this.filterMaxPrice||0!==this.filterMinPrice||0!==this.filterCategory||0!==this.filterMaterial.length||0!==this.filterCollection.length},filterParams(){const t={};return this.filterCategory>0&&(t.categoryId=this.filterCategory),this.filterMaterial.length>0&&(t["materialIds[]"]=this.filterMaterial),this.filterCollection.length>0&&(t["seasonIds[]"]=this.filterCollection),this.filterMinPrice>0&&(t.minPrice=this.filterMinPrice),this.filterMaxPrice>0&&(t.maxPrice=this.filterMaxPrice),t.page=this.currentPage,t.limit=this.pageLimit,new URLSearchParams(t).toString()},currentPage(){return this.page},totalPages(){return this.pages},totalItems(){return this.total},productCategories(){return this.getProductCategories()},productMaterials(){return this.getProductMaterials()},productCollections(){return this.getProductCollections()}},created(){this.filterCategory=this.getFilterCategory()??0,this.setFilterCategory(null)},mounted(){this.loadCategory(),this.loadCollection(),this.loadMaterial(),this.loadProducts()}};const _e=(0,C.Z)(ue,[["render",G],["__scopeId","data-v-64e764d6"]]);var me=_e;const ge=t=>((0,s.dD)("data-v-8e83bf96"),t=t(),(0,s.Cn)(),t),pe={key:0,class:"content container"},he={class:"content__top"},fe={class:"breadcrumbs"},Ce={class:"breadcrumbs__item"},ye={class:"breadcrumbs__item"},be={class:"breadcrumbs__item"},ke={class:"breadcrumbs__link"},ve={class:"item"},we={class:"item__pics pics"},Pe={class:"pics__wrapper"},Ie=["src","alt"],Me={class:"pics__list"},De=["onClick"],Ae=["src","alt"],Ee={class:"item__info"},Ue={class:"item__code"},Le={class:"item__title"},Te={class:"item__form"},ze={class:"item__row item__row--center"},Se={class:"form__counter"},$e=ge((()=>(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-minus"})],-1))),Fe=[$e],xe=ge((()=>(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-plus"})],-1))),Ke=[xe],Oe={class:"item__price"},Ze={class:"item__row"},qe={class:"form__block"},He=ge((()=>(0,s._)("legend",{class:"form__legend"},"Цвет",-1))),Re={class:"colors colors--black"},je={class:"colors__label"},Ve=["checked","onChange"],We={class:"form__block"},Ye=ge((()=>(0,s._)("legend",{class:"form__legend"},"Размер",-1))),Ne={class:"form__label form__label--small form__label--select"},Be=["value"],Ge=["disabled"],Je={key:0,class:"loader"},Qe={key:0,class:"item__row success-message"},Xe={key:1,class:"item__row error-message"},tr={class:"item__desc"},er={class:"tabs"},rr={class:"tabs__item"},ar={class:"tabs__item"},sr=ge((()=>(0,s._)("h3",null,"Доставка:",-1))),ir=ge((()=>(0,s._)("p",null,[(0,s.Uk)(" 1. Курьерская доставка по Москве и Московской области – 1200 ₽"),(0,s._)("br"),(0,s.Uk)(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),(0,s._)("br")],-1))),lr=ge((()=>(0,s._)("h3",null,"Возврат:",-1))),or=ge((()=>(0,s._)("p",null,[(0,s.Uk)(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),(0,s._)("br"),(0,s.Uk)(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),(0,s._)("br"),(0,s.Uk)(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),(0,s._)("br")],-1))),cr=[sr,ir,lr,or];function nr(t,e,r,i,l,o){const c=(0,s.up)("router-link");return o.isItemLoaded?((0,s.wg)(),(0,s.iD)("main",pe,[(0,s._)("div",he,[(0,s._)("ul",fe,[(0,s._)("li",Ce,[(0,s.Wm)(c,{to:{name:"catalog"},class:"breadcrumbs__link"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Каталог ")])),_:1})]),(0,s._)("li",ye,[(0,s.Wm)(c,{to:{name:"catalog"},class:"breadcrumbs__link",onClick:o.setCatalogCategory},{default:(0,s.w5)((()=>[(0,s.Uk)((0,_.zw)(l.item.category.title),1)])),_:1},8,["onClick"])]),(0,s._)("li",be,[(0,s._)("a",ke,(0,_.zw)(l.item.title),1)])])]),(0,s._)("section",ve,[(0,s._)("div",we,[(0,s._)("div",Pe,[(0,s._)("img",{width:"570",height:"570",src:o.productImage,alt:l.item.title},null,8,Ie)]),(0,s._)("ul",Me,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.productImages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"pics__item",key:t.id},[(0,s._)("a",{href:"#",class:(0,_.C_)(["pics__link",{"pics__link--current":t.img===o.productImage}]),onClick:(0,a.iM)((e=>o.changeProductImage(t.img,t.colorId)),["prevent"])},[(0,s._)("img",{width:"98",height:"98",src:t.img,alt:t.title},null,8,Ae)],10,De)])))),128))])]),(0,s._)("div",Ee,[(0,s._)("span",Ue,"Артикул: "+(0,_.zw)(l.item.id),1),(0,s._)("h2",Le,(0,_.zw)(l.item.title),1),(0,s._)("div",Te,[(0,s._)("form",{class:"form",action:"#",onSubmit:e[5]||(e[5]=(0,a.iM)(((...t)=>o.addToCart&&o.addToCart(...t)),["prevent"]))},[(0,s._)("div",ze,[(0,s._)("div",Se,[(0,s._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(...t)=>o.decrementCount&&o.decrementCount(...t))},Fe),(0,s._)("label",null,[(0,s.wy)((0,s._)("input",{type:"number",min:"1",step:"1","onUpdate:modelValue":e[1]||(e[1]=t=>l.productCount=t),name:"count"},null,512),[[a.nr,l.productCount]])]),(0,s._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(...t)=>o.incrementCount&&o.incrementCount(...t))},Ke)]),(0,s._)("b",Oe,(0,_.zw)(o.productPrice)+" ₽ ",1)]),(0,s._)("div",Ze,[(0,s._)("fieldset",qe,[He,(0,s._)("ul",Re,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.item.colors,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:t.id},[(0,s._)("label",je,[(0,s.wy)((0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-item","onUpdate:modelValue":e[3]||(e[3]=t=>l.currentColor=t),checked:t.color.code===o.productColor,onChange:e=>o.changeColor(t.id)},null,40,Ve),[[a.G2,l.currentColor]]),(0,s._)("span",{class:"colors__value",style:(0,_.j5)({"background-color":t.color.code})},null,4)])])))),128))])]),(0,s._)("fieldset",We,[Ye,(0,s._)("label",Ne,[(0,s.wy)((0,s._)("select",{class:"form__select",name:"category","onUpdate:modelValue":e[4]||(e[4]=t=>l.productSize=t)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.item.sizes,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,_.zw)(t.title),9,Be)))),128))],512),[[a.bM,l.productSize]])])])]),(0,s._)("button",{class:"item__button button button--primery",disabled:l.isAddedToCart,type:"submit"},[(0,s.Uk)(" В корзину "),l.isAddedToCart?((0,s.wg)(),(0,s.iD)("span",Je)):(0,s.kq)("",!0)],8,Ge),""!==l.successAddedMessage?((0,s.wg)(),(0,s.iD)("div",Qe,(0,_.zw)(l.successAddedMessage),1)):(0,s.kq)("",!0),""!==l.failAddedMessage?((0,s.wg)(),(0,s.iD)("div",Xe,(0,_.zw)(l.failAddedMessage),1)):(0,s.kq)("",!0)],32)])]),(0,s._)("div",tr,[(0,s._)("ul",er,[(0,s._)("li",rr,[(0,s._)("a",{class:(0,_.C_)(["tabs__link",{"tabs__link--current":"about"===o.openedTab}]),href:"#",onClick:e[6]||(e[6]=(0,a.iM)((t=>o.changeTabContent("about")),["prevent"]))}," Информация о товаре ",2)]),(0,s._)("li",ar,[(0,s._)("a",{class:(0,_.C_)(["tabs__link",{"tabs__link--current":"delivery"===o.openedTab}]),href:"#",onClick:e[7]||(e[7]=(0,a.iM)((t=>o.changeTabContent("delivery")),["prevent"]))}," Доставка и возврат ",2)])]),(0,s._)("div",{class:(0,_.C_)(["item__content tabs__content",{"tabs__content--current":"about"===o.openedTab}])},(0,_.zw)(l.item.content),3),(0,s._)("div",{class:(0,_.C_)(["item__content tabs__content",{"tabs__content--current":"delivery"===o.openedTab}])},cr,2)])])])):(0,s.kq)("",!0)}var dr={name:"ProductPage",data(){return{item:null,loadingProduct:!0,failLoadingProduct:!1,failLoadingProductError:"",currentImage:null,currentColor:null,productCount:1,productSize:null,productColorId:null,isAddedToCart:!1,successAddedMessage:"",failAddedMessage:"",currentTab:"about"}},methods:{...(0,h.OI)(["setFilterCategory"]),...(0,h.nv)(["addCartItem"]),loadItem(){const t=`${re.api.base_url}/api/products/${this.$route.params.id}`;J.Z.get(t).then((t=>{this.item=t.data,this.loadingProduct=!1,this.productSize=this.item.sizes[0].id,this.productColorId=this.item.colors[0].color.id})).catch((()=>{}))},changeProductImage(t,e){this.currentImage=t,this.currentColor=e,this.item.colors.forEach((t=>{t.color.code===e&&(this.productColorId=t.color.id)}))},changeColor(t){this.item.colors.forEach((e=>{e.id===t&&(this.productColorId=e.color.id,e.gallery&&e.gallery[0].file?this.currentImage=e.gallery[0].file.url:this.currentImage=null)}))},addToCart(){this.isAddedToCart=!0;const t={productId:this.item.id,colorId:this.productColorId,sizeId:this.productSize,quantity:this.productCount},e=this.addCartItem(t);e.then((t=>{!0===t.result?(this.successAddedMessage=t.message,setTimeout((()=>{this.successAddedMessage=""}),3e3)):(this.failAddedMessage=t.message,setTimeout((()=>{this.failAddedMessage=""}),3e3)),this.isAddedToCart=!1}))},incrementCount(){this.productCount+=1},decrementCount(){this.productCount>1&&(this.productCount-=1)},setCatalogCategory(){this.setFilterCategory(this.item.category.id)},changeTabContent(t){this.currentTab=t}},computed:{isItemLoaded(){return null!==this.item&&!1===this.loadingProduct&&!1===this.failLoadingProduct},productImage(){return this.currentImage?this.currentImage:this.item.colors[0].gallery&&this.item.colors[0].gallery[0].file.url?this.item.colors[0].gallery[0].file.url:"/img/svg/no-image.svg"},productColor(){return this.currentColor??this.item.colors[0].color.code},productImages(){const t=[];return this.item.colors.forEach((e=>{e.gallery&&e.gallery.forEach((r=>{r.file&&r.file.url&&t.push({img:r.file.url,colorId:e.color.code,current:r.file.url===this.currentImage})}))})),t},productPrice(){return this.productCount*this.item.price},openedTab(){return this.currentTab}},mounted(){this.loadItem()}};const ur=(0,C.Z)(dr,[["render",nr],["__scopeId","data-v-8e83bf96"]]);var _r=ur;const mr={class:"content container"},gr={class:"content__top"},pr={class:"breadcrumbs"},hr={class:"breadcrumbs__item"},fr=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),Cr={class:"content__row"},yr=(0,s._)("h1",{class:"content__title"}," Корзина ",-1),br={class:"content__info"},kr={class:"cart"},vr={class:"cart__field"},wr={key:0,class:"cart__list"},Pr={key:1},Ir={class:"cart__block"},Mr=(0,s._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),Dr={class:"cart__price"},Ar=(0,s._)("button",{class:"cart__button button button--primery",type:"submit"}," Оформить заказ ",-1);function Er(t,e,r,i,l,o){const c=(0,s.up)("router-link"),n=(0,s.up)("CartItem");return(0,s.wg)(),(0,s.iD)("main",mr,[(0,s._)("div",gr,[(0,s._)("ul",pr,[(0,s._)("li",hr,[(0,s.Wm)(c,{to:{name:"catalog"}},{default:(0,s.w5)((()=>[(0,s.Uk)(" Каталог ")])),_:1})]),fr]),(0,s._)("div",Cr,[yr,(0,s._)("span",br,(0,_.zw)(o.cartItemsCount)+" товара ",1)])]),(0,s._)("section",kr,[(0,s._)("form",{class:"cart__form form",onSubmit:e[0]||(e[0]=(0,a.iM)(((...t)=>o.submitFormCart&&o.submitFormCart(...t)),["prevent"]))},[(0,s._)("div",vr,[o.cartIsEmpty?((0,s.wg)(),(0,s.iD)("div",Pr,"Корзина пуста")):((0,s.wg)(),(0,s.iD)("ul",wr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cartItems,(t=>((0,s.wg)(),(0,s.j4)(n,{key:t.id,item:t,onReCalcTotalAmount:o.calcTotalAmount},null,8,["item","onReCalcTotalAmount"])))),128))]))]),(0,s._)("div",Ir,[Mr,(0,s._)("p",Dr,[(0,s.Uk)(" Итого: "),(0,s._)("span",null,(0,_.zw)(l.cartAmount)+" ₽",1)]),Ar])],32)])])}const Ur=t=>((0,s.dD)("data-v-417a36c2"),t=t(),(0,s.Cn)(),t),Lr={class:"cart__item product"},Tr={class:"product__pic"},zr=["src","alt"],Sr={class:"product__title"},$r={class:"product__info product__info--color"},Fr={class:"product__code"},xr={class:"product__counter form__counter"},Kr=Ur((()=>(0,s._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-minus"})],-1))),Or=[Kr],Zr=Ur((()=>(0,s._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-plus"})],-1))),qr=[Zr],Hr={class:"product__price"},Rr=Ur((()=>(0,s._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-close"})],-1))),jr=[Rr];function Vr(t,e,r,i,l,o){return(0,s.wg)(),(0,s.iD)("li",Lr,[(0,s._)("div",Tr,[(0,s._)("img",{src:o.productImg,width:"120",height:"120",alt:o.productTitle},null,8,zr)]),(0,s._)("h3",Sr,(0,_.zw)(o.productTitle),1),(0,s._)("p",$r,[(0,s.Uk)(" Цвет: "),(0,s._)("span",null,[(0,s._)("i",{style:(0,_.j5)({"background-color":o.productColorCode})},null,4),(0,s.Uk)(" "+(0,_.zw)(o.productColorTitle),1)])]),(0,s._)("span",Fr," Артикул: "+(0,_.zw)(o.productCode),1),(0,s._)("div",xr,[(0,s._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(...t)=>o.decrementItemCount&&o.decrementItemCount(...t))},Or),(0,s._)("label",null,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.itemCount=t),name:"count",onChange:e[2]||(e[2]=(...t)=>o.changeItemCount&&o.changeItemCount(...t))},null,544),[[a.nr,l.itemCount]])]),(0,s._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[3]||(e[3]=(...t)=>o.incrementItemCount&&o.incrementItemCount(...t))},qr)]),(0,s._)("b",Hr,(0,_.zw)(o.productPrice)+" ₽ ",1),(0,s._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[4]||(e[4]=(...t)=>o.removeItem&&o.removeItem(...t))},jr)])}var Wr={name:"CartItem",props:["item"],emits:["reCalcTotalAmount"],data(){return{itemCount:1,updateItemCountTimeout:null}},computed:{productImg(){return this.item.color.gallery[0].file?this.item.color.gallery[0].file.url:"/img/svg/no-image.svg"},productTitle(){return this.item.product.title},productColorCode(){return this.item.color.color.code},productColorTitle(){return this.item.color.color.title},productPrice(){return this.itemCount*this.item.price},productCode(){return this.item.product.id}},methods:{...(0,h.Se)(["getUserAccessKey"]),...(0,h.OI)(["setCart"]),removeItem(){const t=this.getUserAccessKey();let e="";null!==t&&(e=`?${new URLSearchParams({userAccessKey:t}).toString()}`);const r=`${re.api.base_url}/api/baskets/products${e}`;J.Z.delete(r,{data:{basketItemId:this.item.id}}).then((t=>{this.setCart(t.data.items),this.$emit("reCalcTotalAmount")}))},changeItemCount(){this.updateItemCountTimeout&&clearTimeout(this.updateItemCountTimeout),this.updateItemCountTimeout=setTimeout((()=>{this.updateItemInCart(),this.$emit("reCalcTotalAmount")}),200)},incrementItemCount(){this.itemCount+=1,this.changeItemCount()},decrementItemCount(){this.itemCount>1&&(this.itemCount-=1,this.changeItemCount())},updateItemInCart(){const t=this.getUserAccessKey();let e="";null!==t&&(e=`?${new URLSearchParams({userAccessKey:t}).toString()}`);const r=`${re.api.base_url}/api/baskets/products${e}`;J.Z.put(r,{basketItemId:`${this.item.id}`,quantity:`${this.itemCount}`}).then((t=>{this.setCart(t.data.items),this.cartData=t.data.items}))}},created(){this.itemCount=this.item.quantity}};const Yr=(0,C.Z)(Wr,[["render",Vr],["__scopeId","data-v-417a36c2"]]);var Nr=Yr,Br={name:"CartPage",components:{CartItem:Nr},data(){return{loadingCartData:!0,cartAmount:0}},computed:{cartItemsCount(){return this.cartItems.length},cartItems(){return this.getCart()},cartIsEmpty(){return 0===this.cartItems.length}},methods:{...(0,h.Se)(["getUserAccessKey","getCart"]),...(0,h.OI)(["setCart"]),loadActualCartData(){const t=this.getUserAccessKey();let e="";null!==t&&(e=`?${new URLSearchParams({userAccessKey:t}).toString()}`);const r=`${re.api.base_url}/api/baskets${e}`;J.Z.get(r).then((t=>{this.setCart(t.data.items),this.calcTotalAmount()}))},calcTotalAmount(){setTimeout((()=>{this.cartAmount=0,this.cartItems.forEach((t=>{this.cartAmount+=t.price*t.quantity}))}),200)},submitFormCart(){this.$router.push({name:"ordering"})}},mounted(){this.loadActualCartData()}};const Gr=(0,C.Z)(Br,[["render",Er]]);var Jr=Gr;const Qr=t=>((0,s.dD)("data-v-ffc3bb06"),t=t(),(0,s.Cn)(),t),Xr={key:0,class:"content container loader-block"},ta=Qr((()=>(0,s._)("div",{class:"loader-content"},[(0,s._)("div",{class:"loader"})],-1))),ea=[ta],ra={key:1,class:"content container fail-load-cart"},aa={key:2,class:"content container"},sa={class:"content__top"},ia={class:"breadcrumbs"},la={class:"breadcrumbs__item"},oa={class:"breadcrumbs__item"},ca=Qr((()=>(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1))),na=Qr((()=>(0,s._)("div",{class:"content__row"},[(0,s._)("h1",{class:"content__title"}," Оформление заказа ")],-1))),da={class:"cart"},ua={class:"cart__field"},_a={class:"cart__data"},ma={class:"form__label"},ga=Qr((()=>(0,s._)("span",{class:"form__value"},"ФИО",-1))),pa={key:0,class:"form__error"},ha={class:"form__label"},fa=Qr((()=>(0,s._)("span",{class:"form__value"},"Адрес доставки",-1))),Ca={key:0,class:"form__error"},ya={class:"form__label"},ba=Qr((()=>(0,s._)("span",{class:"form__value"},"Телефон",-1))),ka={key:0,class:"form__error"},va={class:"form__label"},wa=Qr((()=>(0,s._)("span",{class:"form__value"},"Email",-1))),Pa={key:0,class:"form__error"},Ia={class:"form__label"},Ma=Qr((()=>(0,s._)("span",{class:"form__value"},"Комментарий к заказу",-1))),Da={class:"cart__options"},Aa=Qr((()=>(0,s._)("h3",{class:"cart__title"},"Доставка",-1))),Ea={class:"cart__options options"},Ua={class:"options__label"},La=["value","checked"],Ta={class:"options__value"},za=Qr((()=>(0,s._)("h3",{class:"cart__title"},"Оплата",-1))),Sa={class:"cart__options options"},$a={class:"options__label"},Fa=["value"],xa={class:"options__value"},Ka={class:"cart__block"},Oa={class:"cart__orders"},Za={class:"cart__total"},qa=["disabled"],Ha=Qr((()=>(0,s._)("div",{class:"loader"},null,-1))),Ra={key:0,class:"cart__error form__error-block"},ja=Qr((()=>(0,s._)("h4",null,"Заявка не отправлена!",-1))),Va=Qr((()=>(0,s._)("p",null," Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу. ",-1))),Wa=[ja,Va];function Ya(t,e,r,i,l,o){const c=(0,s.up)("router-link"),n=(0,s.up)("order-product-item");return(0,s.wg)(),(0,s.iD)("div",null,[l.loadingCartData?((0,s.wg)(),(0,s.iD)("div",Xr,ea)):(0,s.kq)("",!0),!l.loadingCartData&&l.failLoadingCartData?((0,s.wg)(),(0,s.iD)("div",ra," Не удалось загрузить данные заказа. ")):(0,s.kq)("",!0),l.loadingCartData||l.failLoadingCartData?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("main",aa,[(0,s._)("div",sa,[(0,s._)("ul",ia,[(0,s._)("li",la,[(0,s.Wm)(c,{to:{name:"catalog"},class:"breadcrumbs__link"},{default:(0,s.w5)((()=>[(0,s.Uk)("Каталог")])),_:1})]),(0,s._)("li",oa,[(0,s.Wm)(c,{to:{name:"cart"},class:"breadcrumbs__link"},{default:(0,s.w5)((()=>[(0,s.Uk)("Корзина")])),_:1})]),ca]),na]),(0,s._)("section",da,[(0,s._)("form",{class:"cart__form form",onSubmit:e[7]||(e[7]=(0,a.iM)(((...t)=>o.submitForm&&o.submitForm(...t)),["prevent"]))},[(0,s._)("div",ua,[(0,s._)("div",_a,[(0,s._)("label",ma,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.clientName=t),placeholder:"Введите ваше полное имя"},null,512),[[a.nr,l.clientName]]),ga,l.isClientNameError?((0,s.wg)(),(0,s.iD)("span",pa,(0,_.zw)(l.clientNameErrorMessage),1)):(0,s.kq)("",!0)]),(0,s._)("label",ha,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.clientAddress=t),placeholder:"Введите ваш адрес"},null,512),[[a.nr,l.clientAddress]]),fa,l.isClientAddressError?((0,s.wg)(),(0,s.iD)("span",Ca,(0,_.zw)(l.clientAddressErrorMessage),1)):(0,s.kq)("",!0)]),(0,s._)("label",ya,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"tel","onUpdate:modelValue":e[2]||(e[2]=t=>l.clientPhone=t),placeholder:"Введите ваш телефон"},null,512),[[a.nr,l.clientPhone]]),ba,l.isClientPhoneError?((0,s.wg)(),(0,s.iD)("span",ka,(0,_.zw)(l.clientPhoneErrorMessage),1)):(0,s.kq)("",!0)]),(0,s._)("label",va,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"email","onUpdate:modelValue":e[3]||(e[3]=t=>l.clientEmail=t),placeholder:"Введи ваш Email"},null,512),[[a.nr,l.clientEmail]]),wa,l.isClientEmailError?((0,s.wg)(),(0,s.iD)("span",Pa,(0,_.zw)(l.clientEmailErrorMessage),1)):(0,s.kq)("",!0)]),(0,s._)("label",Ia,[(0,s.wy)((0,s._)("textarea",{class:"form__input form__input--area","onUpdate:modelValue":e[4]||(e[4]=t=>l.orderComment=t),placeholder:"Ваши пожелания"},null,512),[[a.nr,l.orderComment]]),Ma])]),(0,s._)("div",Da,[Aa,(0,s._)("ul",Ea,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveryItems,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"options__item",key:t.id},[(0,s._)("label",Ua,[(0,s.wy)((0,s._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery","onUpdate:modelValue":e[5]||(e[5]=t=>l.delivery=t),value:t.id,checked:t.id===l.delivery},null,8,La),[[a.G2,l.delivery]]),(0,s._)("span",Ta,[(0,s.Uk)((0,_.zw)(t.title)+" ",1),(0,s._)("b",null,(0,_.zw)(0===t.price?"Бесплатно":`${t.price} ₽`),1)])])])))),128))]),za,(0,s._)("ul",Sa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.payItems,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"options__item",key:t.id},[(0,s._)("label",$a,[(0,s.wy)((0,s._)("input",{class:"options__radio sr-only",type:"radio",name:"pay","onUpdate:modelValue":e[6]||(e[6]=t=>l.pay=t),value:t.id},null,8,Fa),[[a.G2,l.pay]]),(0,s._)("span",xa,(0,_.zw)(t.title),1)])])))),128))])])]),(0,s._)("div",Ka,[(0,s._)("ul",Oa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cartData,(t=>((0,s.wg)(),(0,s.j4)(n,{key:t.id,item:t},null,8,["item"])))),128))]),(0,s._)("div",Za,[(0,s._)("p",null,[(0,s.Uk)("Доставка: "),(0,s._)("b",null,(0,_.zw)(o.deliveryCostString),1)]),(0,s._)("p",null,[(0,s.Uk)(" Итого: "),(0,s._)("b",null,(0,_.zw)(o.cartItemsCount),1),(0,s.Uk)(" товара на сумму "),(0,s._)("b",null,(0,_.zw)(o.cartTotalAmount)+" ₽",1)])]),(0,s._)("button",{class:(0,_.C_)(["cart__button button button--primery",{loading:l.isFormLoading}]),type:"submit",disabled:l.isFormLoading},[(0,s.Uk)(" Оформить заказ "),Ha],10,qa)]),l.isFailSubmitForm?((0,s.wg)(),(0,s.iD)("div",Ra,Wa)):(0,s.kq)("",!0)],32)])]))])}const Na={class:"cart__order"};function Ba(t,e,r,a,i,l){return(0,s.wg)(),(0,s.iD)("li",Na,[(0,s._)("h3",null,(0,_.zw)(l.productTitle),1),(0,s._)("b",null,(0,_.zw)(l.productAmount)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,_.zw)(l.productCode),1)])}var Ga={name:"OrderProductItem",props:["item"],computed:{productTitle(){return this.item.product.title},productAmount(){return this.item.quantity*this.item.price},productCode(){return this.item.product.id}}};const Ja=(0,C.Z)(Ga,[["render",Ba]]);var Qa=Ja,Xa={name:"OrderingPage",components:{OrderProductItem:Qa},data(){return{loadingCartData:!0,failLoadingCartData:!1,failLoadingCartDataError:"",isOrdering:!1,isFailSubmitForm:!1,clientName:"",isClientNameError:!1,clientNameErrorMessage:"",clientAddress:"",isClientAddressError:!1,clientAddressErrorMessage:"",clientPhone:"",isClientPhoneError:!1,clientPhoneErrorMessage:"",clientEmail:"",isClientEmailError:!1,clientEmailErrorMessage:"",orderComment:"",isOrderingCommentError:!1,orderingCommentErrorMessage:"",delivery:0,isDeliveryError:!1,deliveryErrorMessage:"",deliveryCost:"бесплатно",pay:0,isPayError:!1,payErrorMessage:"",deliveryTypes:[],payTypes:[],isFormLoading:!1}},computed:{cartData(){return this.getCart()},cartItemsCount(){return this.cartData.length},cartTotalAmount(){let t=0;return this.cartData.forEach((e=>{t+=(e.quantity-0)*(e.price-0)})),this.deliveryItems.forEach((e=>{e.id===this.delivery&&(t+=e.price-0)})),t},deliveryItems(){return this.deliveryTypes},payItems(){return this.payTypes},deliveryCostString(){return this.deliveryCost}},methods:{...(0,h.Se)(["getCart","getUserAccessKey"]),...(0,h.OI)(["setCart"]),submitForm(){this.isFormLoading=!0,this.isFailSubmitForm=!1,this.isClientNameError=!1,this.clientNameErrorMessage="",this.isClientAddressError=!1,this.clientAddressErrorMessage="",this.isClientPhoneError=!1,this.clientPhoneErrorMessage="",this.isClientEmailError=!1,this.clientEmailErrorMessage="";const t={name:this.clientName,address:this.clientAddress,phone:this.clientPhone,email:this.clientEmail,deliveryTypeId:this.delivery,paymentTypeId:this.pay,comment:this.orderComment},e=this.getUserAccessKey();let r="";null!==e&&(r=`?${new URLSearchParams({userAccessKey:e}).toString()}`);const a=`${re.api.base_url}/api/orders${r}`;J.Z.post(a,t).then((t=>{this.isFormLoading=!1,this.updateCart(),this.$router.push({name:"order-info",params:{id:t.data.id}})})).catch((t=>{if(this.isFormLoading=!1,this.isFailSubmitForm=!0,t.response.data.error.request){const e=t.response.data.error.request;e.name&&(this.isClientNameError=!0,this.clientNameErrorMessage=e.name),e.address&&(this.isClientAddressError=!0,this.clientAddressErrorMessage=e.address),e.phone&&(this.isClientPhoneError=!0,this.clientPhoneErrorMessage=e.phone),e.email&&(this.isClientEmailError=!0,this.clientEmailErrorMessage=e.email)}}))},loadActualCartData(){const t=this.getUserAccessKey();let e="";null!==t&&(e=`?${new URLSearchParams({userAccessKey:t}).toString()}`);const r=`${re.api.base_url}/api/baskets${e}`;J.Z.get(r).then((t=>{this.setCart(t.data.items),this.calcTotalAmount(),this.loadingCartData=!1})).catch((()=>{this.loadingCartData=!1,this.failLoadingCartData=!0}));const a=`${re.api.base_url}/api/deliveries`;J.Z.get(a).then((t=>{this.delivery=t.data[0].id,this.deliveryTypes=t.data}))},calcTotalAmount(){setTimeout((()=>{this.cartAmount=0,this.cartData.forEach((t=>{this.cartAmount+=t.price*t.quantity}))}),200)},loadPayByDeliveryType(t){const e=`?${new URLSearchParams({deliveryTypeId:t}).toString()}`,r=`${re.api.base_url}/api/payments${e}`;J.Z.get(r).then((t=>{this.pay=t.data[0].id,this.payTypes=t.data}))},updateCart(){const t=this.getUserAccessKey();let e="";null!==t&&(e=`?${new URLSearchParams({userAccessKey:t}).toString()}`);const r=`${re.api.base_url}/api/baskets${e}`;J.Z.get(r).then((t=>{this.setCart(t.data.items)}))}},mounted(){this.loadActualCartData()},watch:{delivery(t){this.loadPayByDeliveryType(t),this.deliveryTypes.forEach((e=>{if(e.id===t){const t=parseInt(e.price,10);this.deliveryCost=0===t?"бесплатно":`${e.price} ₽`}}))}}};const ts=(0,C.Z)(Xa,[["render",Ya],["__scopeId","data-v-ffc3bb06"]]);var es=ts;const rs=t=>((0,s.dD)("data-v-67277f3b"),t=t(),(0,s.Cn)(),t),as={key:0,class:"content container loader-block"},ss=rs((()=>(0,s._)("div",{class:"loader-content"},[(0,s._)("div",{class:"loader"})],-1))),is=[ss],ls={key:1,class:"content container fail-load-order"},os={key:2,class:"content container"},cs={class:"content__top"},ns={class:"breadcrumbs"},ds={class:"breadcrumbs__item"},us={class:"breadcrumbs__item"},_s=rs((()=>(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1))),ms={class:"content__title"},gs={class:"cart"},ps={class:"cart__form form",action:"#",method:"POST"},hs={class:"cart__field"},fs=rs((()=>(0,s._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1))),Cs={class:"dictionary"},ys={class:"dictionary__item"},bs=rs((()=>(0,s._)("span",{class:"dictionary__key"}," Получатель ",-1))),ks={class:"dictionary__value"},vs={class:"dictionary__item"},ws=rs((()=>(0,s._)("span",{class:"dictionary__key"}," Адрес доставки ",-1))),Ps={class:"dictionary__value"},Is={class:"dictionary__item"},Ms=rs((()=>(0,s._)("span",{class:"dictionary__key"}," Телефон ",-1))),Ds={class:"dictionary__value"},As={class:"dictionary__item"},Es=rs((()=>(0,s._)("span",{class:"dictionary__key"}," Email ",-1))),Us={class:"dictionary__value"},Ls={class:"dictionary__item"},Ts=rs((()=>(0,s._)("span",{class:"dictionary__key"}," Способ оплаты ",-1))),zs={class:"dictionary__value"},Ss={class:"cart__block"},$s={class:"cart__orders"},Fs={class:"cart__total"};function xs(t,e,r,a,i,l){const o=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",null,[i.isLoadingOrder?((0,s.wg)(),(0,s.iD)("div",as,is)):(0,s.kq)("",!0),!i.isLoadingOrder&&i.failLoadingOrder?((0,s.wg)(),(0,s.iD)("div",ls," Не удалось загрузить данные заказа. ")):(0,s.kq)("",!0),i.isLoadingOrder||i.failLoadingOrder?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("main",os,[(0,s._)("div",cs,[(0,s._)("ul",ns,[(0,s._)("li",ds,[(0,s.Wm)(o,{to:{name:"catalog"},class:"breadcrumbs__link"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Каталог ")])),_:1})]),(0,s._)("li",us,[(0,s.Wm)(o,{to:{name:"cart"},class:"breadcrumbs__link"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Корзина ")])),_:1})]),_s]),(0,s._)("h1",ms,[(0,s.Uk)(" Заказ оформлен "),(0,s._)("span",null,"№ "+(0,_.zw)(i.order.id),1)])]),(0,s._)("section",gs,[(0,s._)("form",ps,[(0,s._)("div",hs,[fs,(0,s._)("ul",Cs,[(0,s._)("li",ys,[bs,(0,s._)("span",ks,(0,_.zw)(i.order.name),1)]),(0,s._)("li",vs,[ws,(0,s._)("span",Ps,(0,_.zw)(i.order.address),1)]),(0,s._)("li",Is,[Ms,(0,s._)("span",Ds,(0,_.zw)(i.order.phone),1)]),(0,s._)("li",As,[Es,(0,s._)("span",Us,(0,_.zw)(i.order.email),1)]),(0,s._)("li",Ls,[Ts,(0,s._)("span",zs,(0,_.zw)(i.order.paymentType),1)])])]),(0,s._)("div",Ss,[(0,s._)("ul",$s,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.order.basket.items,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"cart__order",key:t.id},[(0,s._)("h3",null,(0,_.zw)(t.product.title),1),(0,s._)("b",null,(0,_.zw)(t.quantity*t.price)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,_.zw)(t.product.id),1)])))),128))]),(0,s._)("div",Fs,[(0,s._)("p",null,[(0,s.Uk)("Доставка: "),(0,s._)("b",null,(0,_.zw)(0===parseInt(i.order.deliveryType.price)?"бесплатно":`${i.order.deliveryType.price} ₽`),1)]),(0,s._)("p",null,[(0,s.Uk)(" Итого: "),(0,s._)("b",null,(0,_.zw)(i.order.basket.items.length),1),(0,s.Uk)(" товара на сумму "),(0,s._)("b",null,(0,_.zw)(i.order.totalPrice)+" ₽",1)])])])])])]))])}var Ks={name:"OrderInfoPage",data(){return{order:null,isLoadingOrder:!0,failLoadingOrder:!1,failLoadingOrderMessage:""}},methods:{...(0,h.Se)(["getUserAccessKey"]),loadOrderData(){const t=this.getUserAccessKey();let e="";null!==t&&(e=`?${new URLSearchParams({userAccessKey:t}).toString()}`);const r=`${re.api.base_url}/api/orders/${this.$route.params.id}${e}`;J.Z.get(r).then((t=>{this.order=t.data,this.isLoadingOrder=!1})).catch((()=>{this.isLoadingOrder=!1,this.failLoadingOrder=!0}))}},mounted(){this.loadOrderData()}};const Os=(0,C.Z)(Ks,[["render",xs],["__scopeId","data-v-67277f3b"]]);var Zs=Os;const qs=[{path:"/",name:"catalog",component:me},{path:"/product/:id",name:"product",component:_r},{path:"/cart",name:"cart",component:Jr},{path:"/ordering",name:"ordering",component:es},{path:"/order/:id",name:"order-info",component:Zs}],Hs=(0,Z.p7)({history:(0,Z.PO)("/"),routes:qs});var Rs=Hs,js=(0,h.MT)({state:{userAccessKey:null,cartId:null,userId:null,productCategories:[],productMaterials:[],productCollections:[],filterCategory:null,cart:[]},getters:{getUserAccessKey(t){return null===t.userAccessKey&&(t.userAccessKey=localStorage.getItem("userAccessKey")),t.userAccessKey},getCartId(t){return null===t.cartId&&(t.cartId=localStorage.getItem("cartId")),t.cartId},getUserId(t){return null===t.userId&&(t.userId=localStorage.getItem("userId")),t.userId},getProductCategories(t){return t.productCategories},getProductMaterials(t){return t.productMaterials},getProductCollections(t){return t.productCollections},getFilterCategory(t){return t.filterCategory},getCart(t){return 0===t.cart.length&&(t.cart=localStorage.getItem("cartData")?JSON.parse(localStorage.getItem("cartData")):[]),t.cart}},mutations:{setUserAccessKey(t,e){t.userAccessKey=e,localStorage.setItem("userAccessKey",e)},setProductCategories(t,e){t.productCategories=e},setProductMaterials(t,e){t.productMaterials=e},setProductCollections(t,e){t.productCollections=e},setFilterCategory(t,e){t.filterCategory=e},addCartItem(t,e){t.cart.push(e)},setCart(t,e){t.cart=e,localStorage.setItem("cartData",JSON.stringify(e))},setCartId(t,e){t.cartId=e,localStorage.setItem("cartId",e)},setUserId(t,e){t.userId=e,localStorage.setItem("userId",e)}},actions:{async addCartItem(t,e){const r=t.getters.getUserAccessKey;let a="";r&&(a=`?${new URLSearchParams({userAccessKey:r}).toString()}`);const s=`${re.api.base_url}/api/baskets/products${a}`;return J.Z.post(s,e,{}).then((e=>(t.commit("setCart",e.data.items),e.data.id&&t.commit("setCartId",e.data.id),e.data.user.id&&t.commit("setUserId",e.data.user.id),e.data.user.accessKey&&t.commit("setUserAccessKey",e.data.user.accessKey),{result:!0,message:"Товар успешно добавлен в корзину."}))).catch((()=>({result:!1,message:"Не удалось добавить товар в корзину."})))}},modules:{}});(0,a.ri)(O).use(js).use(Rs).mount("#app")}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,i){if(!a){var l=1/0;for(d=0;d<t.length;d++){a=t[d][0],s=t[d][1],i=t[d][2];for(var o=!0,c=0;c<a.length;c++)(!1&i||l>=i)&&Object.keys(r.O).every((function(t){return r.O[t](a[c])}))?a.splice(c--,1):(o=!1,i<l&&(l=i));if(o){t.splice(d--,1);var n=s();void 0!==n&&(e=n)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[a,s,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,i,l=a[0],o=a[1],c=a[2],n=0;if(l.some((function(e){return 0!==t[e]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(c)var d=c(r)}for(e&&e(a);n<l.length;n++)i=l[n],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},a=self["webpackChunkproject"]=self["webpackChunkproject"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(455)}));a=r.O(a)})();
//# sourceMappingURL=app.1728ad73.js.map